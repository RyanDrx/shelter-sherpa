<h1>New Profile</h1>


<mat-card>
  <mat-card-content>
    <h2> Details </h2>
    <form [formGroup]="ScreenFormGroup" (ngSubmit)="onSubmit()">
      <div class="form-content">
        <div>
          <mat-form-field>
            <input matInput placeholder="FESA Identifier" formControlName="FesaID" required>
          </mat-form-field>

          <mat-form-field>
            <input matInput [matDatepicker]="myDatepicker" placeholder="Screen Date" formControlName="ScreenDate">
            <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
            <mat-datepicker #myDatepicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field>
            <mat-select placeholder="Best Way to Contact" formControlName="ContactMethod">
              <mat-option *ngFor="let method of formValues.contactMethods" [value]="method.value">
                {{ method.viewValue }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>


      <mat-divider></mat-divider>

      <div formArrayName="parentGuardians">
        <div class="form-section-header">
          <h2>Parents/Guardian(s)</h2>
        </div>
        <div class="form-content">
          <div *ngFor="let g of parentGuardians.controls; let i = index" [formGroupName]="i">
            <div>
              <h4>Parent/Guardian {{i + 1}}</h4>
              <div>
                <mat-form-field>
                  <input matInput placeholder="First Name" formControlName="FirstName">
                </mat-form-field>
                <mat-form-field>
                  <input matInput placeholder="Middle Name" formControlName="MiddleName">
                </mat-form-field>
                <mat-form-field>
                  <input matInput placeholder="Last Name" formControlName="LastName">
                </mat-form-field>
              </div>
              <div>
                <mat-form-field>
                  <input matInput placeholder="Maiden Name/Alias" formControlName="MaidenNameAlias">
                </mat-form-field>
                <mat-form-field>
                  <input matInput [matDatepicker]="id" placeholder="Date of Birth" formControlName="DOB">
                  <mat-datepicker-toggle matSuffix [for]="id"></mat-datepicker-toggle>
                  <mat-datepicker #id></mat-datepicker>
                </mat-form-field>
                <mat-form-field>
                  <input matInput placeholder="Gender" formControlName="Gender">
                </mat-form-field>
              </div>
            </div>
          </div>
          <span class="add-button">
            <button type="button" (click)="addGuardian()" mat-button color="accent">Add Parent/Guardian</button>
          </span>
        </div>
      </div>

      <mat-divider></mat-divider>

      <div formArrayName="children">
        <div class="form-section-header">
          <h2>Children</h2>
        </div>
        <div class="form-content">
          <div *ngFor="let ch of children.controls; let t = index" [formGroupName]="t">
            <div>
              <h4>Child {{t + 1}}:</h4>
              <div>
                <mat-form-field>
                  <input matInput placeholder="First Name" formControlName="FirstName">
                </mat-form-field>

                <mat-form-field>
                  <input matInput placeholder="Last Name" formControlName="LastName">
                </mat-form-field>

                <mat-form-field>
                  <input matInput [matDatepicker]="idc" placeholder="Date of Birth" formControlName="DOB">
                  <mat-datepicker-toggle matSuffix [for]="idc"></mat-datepicker-toggle>
                  <mat-datepicker #idc></mat-datepicker>
                </mat-form-field>
              </div>
              <div>
                <mat-form-field>
                  <input matInput placeholder="Gender" formControlName="Gender">
                </mat-form-field>
                <mat-form-field>
                  <input matInput placeholder="School District" formControlName="School">
                </mat-form-field>
              </div>
            </div>
          </div>
          <span class="add-button">
            <button type="button" (click)="addChild()" mat-button color="accent">Add Child</button>
          </span>
        </div>
      </div>

      <br />
      <br />
      <mat-divider></mat-divider>
      <div class="form-actions">
        <span class="center">
          <button type="submit" mat- [disabled]="ScreenFormGroup.pristine" mat-raised-button color="accent">Save</button> &nbsp;
          <button type="button" (click)="revert()" [disabled]="ScreenFormGroup.pristine" mat-raised-button color="warn">Revert</button>
        </span>
      </div>
    </form>
  </mat-card-content>
</mat-card>
<p>Form value: {{ ScreenFormGroup.value | json}}</p>
